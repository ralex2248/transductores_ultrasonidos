{% extends "home_base.html" %}
{% load static %}
<title>{% block title %}Lista de Fluidos{% endblock %}</title>
{% block content %}

<link rel="stylesheet" href="{% static 'css/style_fluido.css' %}">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"> <!-- Importa Font Awesome -->

<style>
  html, body {
    width: 100%;
    height: 100%;
    margin: 0;
    padding: 0;
  }
  
  .container {
    position: center;
    min-height: 100vh;
    z-index: 1;
  }
  
  .container::before {
    content: "";
    background-image: url('{% static "img/background1.webp" %}');
    background-size: cover;
    background-position: center center;
    background-repeat: repeat;
    background-attachment: fixed;
    opacity: 0.4;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    position: absolute;
    z-index: -1;
  }
</style>

<div class="container">
  <div class="main-content">
    <div class="left">
      <h1>Lista de Fluidos</h1>
      <form method="get" action="{% url 'fluidos' %}">
        <div class="action-buttons">
            <input type="text" name="search" value="{{ search }}" placeholder=" Buscar...">
            <button type="submit" class="addButton"><i class="fas fa-search"></i></button>
            <a href="{% url 'agregar_fluido' %}" class="addButton">Agregar fluido</a>
        </div>
    </form>
    
      
      
      <form method="post" action="{% url 'eliminar_fluidos' %}" id="delete_fluidos_form">
        {% csrf_token %}
        <div class="grid">
          <table>
            <thead>
                <tr>
                    <th></th> <!-- Columna para checkboxes -->
                    <th>Nombre</th>
                    <th>Descripción</th>
                    <th>Fecha</th>
                    <th>Acciones</th> <!-- Nueva columna para el botón de editar -->
                </tr>
            </thead>
            <tbody>
                {% for fluido in fluidos_paginate %}
                <tr>
                  <td>
                      <input type="checkbox" name="selected_fluidos" value="{{ fluido.id }}">
                  </td>
                  <td>{{ fluido.nombre_fluido }}</td>
                  <td>{{ fluido.descripcion }}</td>
                  <td>{{ fluido.fecha_fluido }}</td>
                  <td>
                      <a href="{% url 'editar_fluido' fluido.id %}" class="editButton">
                          <i class="fas fa-edit"></i> Editar
                      </a>
                  </td>
              </tr>
              
                {% endfor %}
            </tbody>
        </table>
        </div>
        <button type="submit" class="deleteButton" id="delete_fluidos_button"><i class="fas fa-trash"></i></button> <!-- Reemplaza el texto del botón por un icono de basura -->
      </form>

      <div class="pagination">
        <span class="step-links">
          {% if fluidos_paginate.has_previous %}
          <a href="?page={{ fluidos_paginate.previous_page_number }}{% if search %}&search={{ search }}{% endif %}" class="addButton"><<</a>
          <a href="?page=1{% if search %}&search={{ search }}{% endif %}" class="addButton"><</a>
          {% endif %}
          <span class="current-page">{{ fluidos_paginate.number }} de {{ fluidos_paginate.paginator.num_pages }}</span>
          {% if fluidos_paginate.has_next %}
          <a href="?page={{ fluidos_paginate.next_page_number }}{% if search %}&search={{ search }}{% endif %}" class="addButton">></a>
          <a href="?page={{ fluidos_paginate.paginator.num_pages }}{% if search %}&search={{ search }}{% endif %}" class="addButton">>></a>
          {% endif %}
        </span>
      </div>
    </div>
  </div>
</div>

<script>
  document.getElementById('delete_fluidos_button').addEventListener('click', function (event) {
    var confirmed = confirm('¿Está seguro de que desea eliminar los fluidos seleccionados?');
    if (!confirmed) {
      event.preventDefault();
    }
  });
</script>

{% endblock %}
